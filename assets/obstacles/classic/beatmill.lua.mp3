
function getAngle()
	ang = math.pi/4*mgGetBeat(0.3)
	if reverse then ang = -ang end
	return ang
end

function init()
	reverse = mgGetBool("reverse", false)
	size = mgGetFloat("size", 0.25)

	mgMaterial("steel")
	mgStatic(1)
	b = mgCreateBody()
	mgCreateBox(b, 0.1, 1, 0.05, 0, 2.5, -0.1)

	rotor = mgCreateBody(0, 1.5, 0, 0, 0, getAngle())
	mgStatic(0)
	mgCreateBox(rotor, 0.11, 0.11, 0.02)
	mgMaterial("glass")
	mgColor(0.7, 1, 0.7)
	mgCreateBox(rotor, 0.5, size, 0.02, 0.6, 0, 0)
	mgCreateBox(rotor, 0.5, size, 0.02, -0.6, 0, 0)
	mgCreateBox(rotor, size, 0.5, 0.02, 0, 0.6, 0)
	mgCreateBox(rotor, size, 0.5, 0.02, 0, -0.6, 0)
end


function tick()
	mgMove(rotor, 0, 1.5, 0)
	mgRotate(rotor, 0, 0, getAngle(), 0.05, 5)
end

